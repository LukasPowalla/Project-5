if we want to look at energy conservation, then you will have to take into account all the energy from all the particles.

When you want to check the virial theorem , however, this holds only for the particles that are bound, so you should not consider the particles that are ejected.
